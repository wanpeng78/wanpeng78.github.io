<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>点击左上角Blog访问博客 Blog</title>
        <link>https://wanpeng78.github.io/blog</link>
        <description>点击左上角Blog访问博客 Blog</description>
        <lastBuildDate>Thu, 15 Jun 2023 05:33:52 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>Zh</language>
        <item>
            <title><![CDATA[大数据环境搭建]]></title>
            <link>https://wanpeng78.github.io/blog/大数据环境搭建</link>
            <guid>https://wanpeng78.github.io/blog/大数据环境搭建</guid>
            <pubDate>Thu, 15 Jun 2023 05:33:52 GMT</pubDate>
            <description><![CDATA[一、基础环境准备]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一基础环境准备">一、基础环境准备<a href="#一基础环境准备" class="hash-link" aria-label="一、基础环境准备的直接链接" title="一、基础环境准备的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1修改主机名添加网络映射和主机映射hosts文件关闭防火墙与selinux">1.修改主机名、添加网络映射和主机映射hosts文件、关闭防火墙与SELinux：<a href="#1修改主机名添加网络映射和主机映射hosts文件关闭防火墙与selinux" class="hash-link" aria-label="1.修改主机名、添加网络映射和主机映射hosts文件、关闭防火墙与SELinux：的直接链接" title="1.修改主机名、添加网络映射和主机映射hosts文件、关闭防火墙与SELinux：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">如果重置：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf .ssh/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2配置ntp时间同步">2.配置ntp时间同步：<a href="#2配置ntp时间同步" class="hash-link" aria-label="2.配置ntp时间同步：的直接链接" title="2.配置ntp时间同步：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">master节点操作步骤：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tzselect   5911 （修改时区）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum  install  -y  ntp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart ntpd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vi  /etc/ntp.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server  127.127.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fudge  127.127.1.0   stratum 10    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave节点操作步骤：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ntpdate  master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/30 10-17 * * * ntpdate master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">早十晚五每隔半个小时同步时间  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3配置免密登录">3.配置免密登录：<a href="#3配置免密登录" class="hash-link" aria-label="3.配置免密登录：的直接链接" title="3.配置免密登录：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">各个节点均需要配置：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式一：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id root@master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id root@slave1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id root@slave2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方式二：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id -i /root/.ssh/id_dsa.pub slave1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id -i /root/.ssh/id_dsa.pub slave2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="二安装jdk环境">二、安装JDK环境：<a href="#二安装jdk环境" class="hash-link" aria-label="二、安装JDK环境：的直接链接" title="二、安装JDK环境：的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-删除本机自带的jdk">1. 删除本机自带的jdk:<a href="#1-删除本机自带的jdk" class="hash-link" aria-label="1. 删除本机自带的jdk:的直接链接" title="1. 删除本机自带的jdk:的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum  remove  java*  -y </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2解压jdk安装包到指定目录">2.解压jdk安装包到指定目录：<a href="#2解压jdk安装包到指定目录" class="hash-link" aria-label="2.解压jdk安装包到指定目录：的直接链接" title="2.解压jdk安装包到指定目录：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /usr/java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -zxvf /opt/jdk-8u171-linux-x64.tar.gz -C /usr/java/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3添加全局环境变量">3.添加全局环境变量：<a href="#3添加全局环境变量" class="hash-link" aria-label="3.添加全局环境变量：的直接链接" title="3.添加全局环境变量：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vi  /etc/profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#JAVA HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/usr/java/jdk1.8.0_171</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$JAVA_HOME/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4同步slaves节点环境变量与安装目录">4.同步slaves节点环境变量与安装目录：<a href="#4同步slaves节点环境变量与安装目录" class="hash-link" aria-label="4.同步slaves节点环境变量与安装目录：的直接链接" title="4.同步slaves节点环境变量与安装目录：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scp -r /usr/java root@slave1:/usr/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp -r /usr/java root@slave2:/usr/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp -r /etc/profile root@slave1:/etc/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp -r /etc/profile root@slave2:/etc/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="5验证">5.验证：<a href="#5验证" class="hash-link" aria-label="5.验证：的直接链接" title="5.验证：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source /etc/profile 或者 ./etc/profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="三hadoop配置文件">三、Hadoop配置文件：<a href="#三hadoop配置文件" class="hash-link" aria-label="三、Hadoop配置文件：的直接链接" title="三、Hadoop配置文件：的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1hadoop-envsh文件">1.hadoop-env.sh文件：<a href="#1hadoop-envsh文件" class="hash-link" aria-label="1.hadoop-env.sh文件：的直接链接" title="1.hadoop-env.sh文件：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/usr/java/jdk1.8.0_171</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2yarn-envsh">2.yarn-env.sh<a href="#2yarn-envsh" class="hash-link" aria-label="2.yarn-env.sh的直接链接" title="2.yarn-env.sh的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/usr/java/jdk1.8.0_221 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3core-sitexml">3.core-site.xml<a href="#3core-sitexml" class="hash-link" aria-label="3.core-site.xml的直接链接" title="3.core-site.xml的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;fs.default.name&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;hdfs://master:9000&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;/usr/hadoop/hadoop-2.7.7/hdfs/tmp&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;description&gt;A base for other temporary directories.&lt;/description&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;io.file.buffer.size&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;131072&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;fs.checkpoint.period&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;60&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;fs.checkpoint.size&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;67108864&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4hdfs-sitexml">4.hdfs-site.xml<a href="#4hdfs-sitexml" class="hash-link" aria-label="4.hdfs-site.xml的直接链接" title="4.hdfs-site.xml的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;dfs.replication&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;2&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;file:/usr/hadoop/hadoop-2.7.7/hdfs/name&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;final&gt;true&lt;/final&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;file:/usr/hadoop/hadoop-2.7.7/hdfs/data&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;final&gt;true&lt;/final&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;dfs.namenode.secondary.http-master&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;master:9001&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;dfs.webhdfs.enabled&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;true&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;dfs.permissions&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;false&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="5yarn-sitexml">5.yarn-site.xml<a href="#5yarn-sitexml" class="hash-link" aria-label="5.yarn-site.xml的直接链接" title="5.yarn-site.xml的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;yarn.resourcemanager.master&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;master:18040&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;yarn.resourcemanager.scheduler.master&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;master:18030&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;yarn.resourcemanager.webapp.master&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;master:18088&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;yarn.resourcemanager.resource-tracker.master&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;master:18025&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;yarn.resourcemanager.admin.master&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;master:18141&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;yarn.nodemanager.auxservices.mapreduce.shuffle.class&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- Site specific YARN configuration properties --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="6mapred-sitexml">6.mapred-site.xml<a href="#6mapred-sitexml" class="hash-link" aria-label="6.mapred-site.xml的直接链接" title="6.mapred-site.xml的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;yarn&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="7配置和验证启动集群">7.配置和验证启动集群<a href="#7配置和验证启动集群" class="hash-link" aria-label="7.配置和验证启动集群的直接链接" title="7.配置和验证启动集群的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">slaves，master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hadoop namenode -format </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sbin/start-all.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="四zk配置文件">四、zk配置文件：<a href="#四zk配置文件" class="hash-link" aria-label="四、zk配置文件：的直接链接" title="四、zk配置文件：的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1修改这两个配置文件">1修改这两个配置文件<a href="#1修改这两个配置文件" class="hash-link" aria-label="1修改这两个配置文件的直接链接" title="1修改这两个配置文件的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vi zoo.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataDir=/usr/zookeeper/zookeeper-3.4.14/zkdata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataLogDir=/usr/zookeeper/zookeeper-3.4.14/zkdatalog   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.1=master:2888:3888</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.2=slave1:2888:3888</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.3=slave2:2888:3888</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vi zkdata/myid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2根据节点修改myid远程拷贝">2.根据节点修改myid，远程拷贝：<a href="#2根据节点修改myid远程拷贝" class="hash-link" aria-label="2.根据节点修改myid，远程拷贝：的直接链接" title="2.根据节点修改myid，远程拷贝：的直接链接">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3配置环境变量">3.配置环境变量：<a href="#3配置环境变量" class="hash-link" aria-label="3.配置环境变量：的直接链接" title="3.配置环境变量：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vi  /etc/profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Zookeeper HOME </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export ZOOKEEPER_HOME=/usr/zookeeper/zookeeper-3.4.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$ZOOKEEPER_HOME/bin:$PATH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4启动zk进程">4.启动ZK进程：<a href="#4启动zk进程" class="hash-link" aria-label="4.启动ZK进程：的直接链接" title="4.启动ZK进程：的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source /etc/profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">启动（位置/usr/zookeeper/zookeeper-3.4.14）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/zkServer.sh start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">查看状态（要等三个虚拟机执行完启动命令后才行）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/zkServer.sh status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="5zk其他说明zoocfg文件解析">5.ZK其他说明：（zoo.cfg文件解析）<a href="#5zk其他说明zoocfg文件解析" class="hash-link" aria-label="5.ZK其他说明：（zoo.cfg文件解析）的直接链接" title="5.ZK其他说明：（zoo.cfg文件解析）的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tickTime=2000   #心跳间隔</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">initLimit=10        #最大初始时间限制10倍心跳</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">syncLimit=5       #请求应答时长5倍心跳</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataDir=/usr/zookeeper/zookeeper-3.4.14/zkdata   # 数据目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clientPort=2181  #客户端、服务端连接端口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataLogDir=/usr/zookeeper/zookeeper-3.4.14/zkdatalog   #日志目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.1=master:2888:3888   #集群列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.2=slave1:2888:3888</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.3=slave2:2888:3888</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="五hbase配置文件">五、hbase配置文件：<a href="#五hbase配置文件" class="hash-link" aria-label="五、hbase配置文件：的直接链接" title="五、hbase配置文件：的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1hbase-sitexml">1.hbase-site.xml<a href="#1hbase-sitexml" class="hash-link" aria-label="1.hbase-site.xml的直接链接" title="1.hbase-site.xml的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hbase.rootdir&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;hdfs://master:9000/hbase&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hbase.cluster.distributed&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;true&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hbase.master&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;hdfs://master:6000&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;master,slave1,slave2&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;/usr/zookeeper/zookeeper-3.4.10&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2hbase-envsh">2.hbase-env.sh<a href="#2hbase-envsh" class="hash-link" aria-label="2.hbase-env.sh的直接链接" title="2.hbase-env.sh的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export HBASE_MANAGES_ZK=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/usr/java/jdk1.8.0_171</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HBASE_CLASSPATH=/usr/hadoop/hadoop-2.7.7/etc/hadoop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3regionservers和复制hadoop的hdfscore文件到hbase的conf">3.regionservers和复制hadoop的hdfs/core文件到hbase的conf<a href="#3regionservers和复制hadoop的hdfscore文件到hbase的conf" class="hash-link" aria-label="3.regionservers和复制hadoop的hdfs/core文件到hbase的conf的直接链接" title="3.regionservers和复制hadoop的hdfs/core文件到hbase的conf的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">运行和测试，在master上执行(保证hadoop和zookeeper已开启)： </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://gitee.com/gogo_2199426220/blogimage/raw/master/blogimage/20211213120812.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="六hive配置文件">六、hive配置文件<a href="#六hive配置文件" class="hash-link" aria-label="六、hive配置文件的直接链接" title="六、hive配置文件的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1slave2数据库">1.slave2数据库<a href="#1slave2数据库" class="hash-link" aria-label="1.slave2数据库的直接链接" title="1.slave2数据库的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">先配置本地yum源文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">安装 MySQL： wget http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm yum -y localinstall mysql57-community-release-el7-8.noarch.rpm yum -y install mysql-community-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">启动服务 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">重载所有修改过的配置文件：systemctl daemon-reload </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">开启服务：systemctl start mysqld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">开机自启：systemctl enable mysqld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grep "temporary password" /var/log/mysqld.log   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">登陆 MySQL：mysql -uroot -p（注意中英文）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.MySQL 密码安全策略设置：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">设置密码强度为低级：set global validate_password_policy=0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">设置密码长度：set global validate_password_length=4;  修改本地密码：alter user 'root'@'localhost' identified by '123456'; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">退出：\q</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">设置远程登录 以新密码登陆 MySQL：mysql -uroot -p123456  创建用户：create user 'root'@'%' identified by '123456'; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">允许远程连接：grant all privileges on *.* to 'root'@'%' with grant option; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">刷新权限：flush privileges;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">master 中执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">由于客户端需要和 hadoop 通信，所以需要更改 Hadoop 中 jline 的版本。即保留一个高版 本的 jline jar 包，从 hive 的 lib 包中拷贝到 Hadoop 中 lib 位置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp /usr/hive/apache-hive-2.1.1-bin/lib/jline-2.12.jar /usr/hadoop/hadoop-2.7.3/share/hadoop/yarn/lib/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave1 中进行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">因为服务端需要和 Mysql 通信，所以服务端需要将 Mysql 的依赖包放在 Hive 的 lib 目录 下</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /usr/hive/apache-hive-2.1.1-bin/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget http://10.10.88.2:8000/bigdata/bigdata_tar/mysql-connector-java-5.1.47-bin.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp -r mysql-connector-java-5.1.47-bin.jar root@master:/usr/hive/apache-hive-2.1.1-bin/lib/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2slave1服务端">2.slave1服务端<a href="#2slave1服务端" class="hash-link" aria-label="2.slave1服务端的直接链接" title="2.slave1服务端的直接链接">​</a></h4><p>hive-env.sh</p><p>hive-site.xml</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HADOOP_HOME=/usr/hadoop/hadoop-2.7.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HIVE_CONF_DIR=/usr/hive/apache-hive-2.1.1-bin/conf/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- Hive产生的元数据存放位置--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;/user/hive_remote/warehouse&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- 数据库连接JDBC的URL地址--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;jdbc:mysql://slave2:3306/hive?createDatabaseIfNotExist=true&amp;amp;useSSL=false&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- 数据库连接driver，即MySQL驱动--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- MySQL数据库用户名--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;root&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- MySQL数据库密码--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;123456&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;false&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;datanucleus.schema.autoCreateAll&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;true&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3master客户端">3.master客户端<a href="#3master客户端" class="hash-link" aria-label="3.master客户端的直接链接" title="3.master客户端的直接链接">​</a></h4><p>hive-env.sh</p><p>hive-site.xml</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HADOOP_HOME=/usr/hadoop/hadoop-2.7.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HIVE_CONF_DIR=/usr/hive/apache-hive-2.1.1-bin/conf/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">下面这个更全！！！！！！！！！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HADOOP_HOME=/usr/hadoop/hadoop-2.7.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HIVE_HOME=/usr/hive/apache-hive-2.1.1-bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HIVE_CONF_DIR=/usr/hive/apache-hive-2.1.1-bin/conf/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 配置Hive运行资源库路径为lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HIVE_AUX_JARS_PATH=/usr/hive/apache-hive-2.1.1-bin/lib/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">！！！！！！！！！！</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- Hive产生的元数据存放位置--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;/user/hive_remote/warehouse&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!--- 使用本地服务连接Hive,默认为true--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hive.metastore.local&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;false&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- 连接服务器--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;name&gt;hive.metastore.uris&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;value&gt;thrift://slave1:9083&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4启动hive">4.启动Hive:<a href="#4启动hive" class="hash-link" aria-label="4.启动Hive:的直接链接" title="4.启动Hive:的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">启动 hive server 服务（slave1 上） bin/hive --service metastore（注意空格）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">启动 hive client(master 上) bin/hive</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="七spark配置文件">七、spark配置文件<a href="#七spark配置文件" class="hash-link" aria-label="七、spark配置文件的直接链接" title="七、spark配置文件的直接链接">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1安装scala环境">1.安装scala环境<a href="#1安装scala环境" class="hash-link" aria-label="1.安装scala环境的直接链接" title="1.安装scala环境的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scala -version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2spark-envsh">2.spark-env.sh:<a href="#2spark-envsh" class="hash-link" aria-label="2.spark-env.sh:的直接链接" title="2.spark-env.sh:的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export SPARK_MASTER_IP=master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SCALA_HOME=/usr/scala/scala-2.11.12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SPARK_WORKER_MEMORY=8g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/usr/java/jdk1.8.0_171</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HADOOP_HOME=/usr/hadoop/hadoop-2.7.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HADOOP_CONF_DIR=/usr/hadoop/hadoop-2.7.7/etc/hadoop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3slaves">3.slaves:<a href="#3slaves" class="hash-link" aria-label="3.slaves:的直接链接" title="3.slaves:的直接链接">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">开启 spark 环境（master 节点） 命令：/usr/spark/spark-2.4.0-bin-hadoop2.7/sbin/start-all.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="八全局环境变量">八、全局环境变量<a href="#八全局环境变量" class="hash-link" aria-label="八、全局环境变量的直接链接" title="八、全局环境变量的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># JAVA_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/usr/java/jdk1.8.0_171</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$JAVA_HOME/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ZOOKEEPER_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export ZOOKEEPER_HOME=/usr/zookeeper/zookeeper-3.4.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$ZOOKEEPER_HOME/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HADOOP_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HADOOP_HOME=/usr/hadoop/hadoop-2.7.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLASSPATH=$CLASSPATH:$HADOOP_HOME/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$HADOOP_HOME/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HBASE_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HBASE_HOME=/usr/hbase/hbase-1.2.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$HBASE_HOME/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HIVE_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HIVE_HOME=/usr/hive/apache-hive-2.1.1-bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:$HIVE_HOME/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># SCALA_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export  SCALA_HOME=/usr/scala/scala-2.11.12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export  PATH=$SCALA_HOME/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Spark  HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SPARK_HOME=/usr/spark/spark-2.4.0-bin-hadoop2.7.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$SPARK_HOME/bin:$PATH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Hadoop</category>
            <category>test</category>
            <category>docusaurus</category>
        </item>
        <item>
            <title><![CDATA[Certbot工具申请证书]]></title>
            <link>https://wanpeng78.github.io/blog/Certbot工具申请证书</link>
            <guid>https://wanpeng78.github.io/blog/Certbot工具申请证书</guid>
            <pubDate>Thu, 15 Jun 2023 05:29:35 GMT</pubDate>
            <description><![CDATA[在 CentOS 7 服务器上部署一个安全的网站（个人学习使用）]]></description>
            <content:encoded><![CDATA[<h1>仅供个人学习使用，请勿用于非法用途！</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="在-centos-7-服务器上部署一个安全的网站个人学习使用">在 CentOS 7 服务器上部署一个安全的网站（个人学习使用）<a href="#在-centos-7-服务器上部署一个安全的网站个人学习使用" class="hash-link" aria-label="在 CentOS 7 服务器上部署一个安全的网站（个人学习使用）的直接链接" title="在 CentOS 7 服务器上部署一个安全的网站（个人学习使用）的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="一安装和配置-nginx">一、安装和配置 Nginx：<a href="#一安装和配置-nginx" class="hash-link" aria-label="一、安装和配置 Nginx：的直接链接" title="一、安装和配置 Nginx：的直接链接">​</a></h3><p>首先，你需要安装 Nginx 作为 Web 服务器。在 CentOS 7 上，可以使用包管理器（如 yum）来安装 Nginx。安装完成后，你可以通过编辑 Nginx 配置文件来配置服务器的监听端口、域名和其他相关设置。</p><div class="language-linux codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-linux codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.更新软件包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.安装 Nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.启动 Nginx 服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.允许 HTTP（80）和 HTTPS（443）流量通过。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo firewall-cmd --zone=public --permanent --add-service=http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo firewall-cmd --zone=public --permanent --add-service=https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo firewall-cmd --reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5.打开 Nginx 配置文件/etc/nginx/nginx.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#全局配置部分定义了 Nginx 进程的用户、工作进程数量、错误#日志位置和进程 ID 文件的路径。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#事件模块配置定义了并发连接数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#HTTP 模块配置包含了一些常见的设置，如 MIME 类型、访问#日志路径、文件传输等。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#在 HTTP 模块配置的最后，可以定义一个或多个服务器块（server），每个服务器块代表一个虚拟主机。其#中定义了服务器监听的端口、域名#和请求的处理逻辑（如根目录和默认文件）。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Nginx 的完整配置文件的结构：（简化的示例）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 全局配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user nginx;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">worker_processes auto;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error_log /var/log/nginx/error.log;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pid /var/run/nginx.pid;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 事件模块配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">events {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    worker_connections 1024;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HTTP 模块配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include /etc/nginx/mime.types;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default_type application/octet-stream;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    access_log /var/log/nginx/access.log;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sendfile on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tcp_nopush on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tcp_nodelay on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    keepalive_timeout 65;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    types_hash_max_size 2048;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 服务器块配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listen 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server_name example.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            root /path/to/website;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            index index.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6.验证配置文件的语法是否正确：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo nginx -t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7.重新加载 Nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl reload nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="二申请证书配置-ssl">二、申请证书,配置 SSL<a href="#二申请证书配置-ssl" class="hash-link" aria-label="二、申请证书,配置 SSL的直接链接" title="二、申请证书,配置 SSL的直接链接">​</a></h3><p>一旦 Nginx 安装并配置完成，你可以开始申请 SSL 证书。SSL 证书可以通过公共的证书颁发机构（CA）获得，例如 Let's Encrypt。你可以使用 Certbot 这样的工具来自动申请和更新证书;
一旦你获得了证书，你需要配置 Nginx 以使用 SSL。在 Nginx 配置文件中，你需要指定证书的路径和其他 SSL 相关的参数。这将启用 HTTPS 访问，并确保网站上的通信是加密的。
完成 SSL 配置后，你需要重新启动 Nginx 以使更改生效。这将使你的网站可以通过 HTTPS 进行访问。</p><div class="language-linux codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-linux codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.安装 Certbot：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install certbot python2-certbot-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.运行 Certbot：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo certbot --nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可能会遇到报错：
<img loading="lazy" alt="nginx端口被占用" src="/assets/images/nginx-88d086a227610ecdaf98792505b308eb.png" width="827" height="467" class="img_ev3q">
解决：</p><div class="language-linux codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-linux codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.修改 Nginx 配置文件监听其他端口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">listen 8080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.保存并退出配置文件，然后重新启动 Nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.证书和密钥文件通常由 Certbot 存储在特定的目录中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/etc/letsencrypt/live/your_domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.获得了 SSL 证书，你需要在 Nginx 配置文件中进行相应的配置，以启用 HTTPS 访问并确保通信是加密的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5.vi /etc/nginx/nginx.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">添加</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen 443 ssl;  # 监听 HTTPS 端口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name your_domain.com;  # 替换为你的域名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_certificate /etc/letsencrypt/live/your_domain/fullchain.pem;  # 替换为你的证书路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl_certificate_key /etc/letsencrypt/live/your_domain/privkey.pem;  # 替换为你的私钥路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 可选：如果你想强制使用 HTTPS，请取消下面两行的注释</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # return 301 https://$host$request_uri;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 可选：添加其他 SSL 相关配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ssl_protocols TLSv1.2 TLSv1.3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ssl_ciphers ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 配置其他 Nginx 相关选项</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="三验证-nginx-配置是否正确">三、验证 Nginx 配置是否正确<a href="#三验证-nginx-配置是否正确" class="hash-link" aria-label="三、验证 Nginx 配置是否正确的直接链接" title="三、验证 Nginx 配置是否正确的直接链接">​</a></h3><p>sudo nginx -t</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="四重启-nginx-以使配置生效">四、重启 Nginx 以使配置生效<a href="#四重启-nginx-以使配置生效" class="hash-link" aria-label="四、重启 Nginx 以使配置生效的直接链接" title="四、重启 Nginx 以使配置生效的直接链接">​</a></h3><p>sudo systemctl restart nginx</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="五导出公钥证书和私钥文件">五、导出公钥证书和私钥文件<a href="#五导出公钥证书和私钥文件" class="hash-link" aria-label="五、导出公钥证书和私钥文件的直接链接" title="五、导出公钥证书和私钥文件的直接链接">​</a></h3><p>请注意，导出私钥文件时要格外小心，确保只将其传输和存储在安全的地方，并避免将私钥泄露给未经授权的人员。
导出公钥证书和私钥文件可能在某些情况下有用，例如在将证书部署到其他服务器或服务中时。但请注意，通常情况下，你不需要手动导出这些文件，因为 Certbot 已经将它们正确配置在 Nginx 中。</p><div class="language-linux codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-linux codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo cat /etc/letsencrypt/live/your_domain/fullchain.pem &gt; /path/to/exported_certificate.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cat /etc/letsencrypt/live/your_domain/privkey.pem &gt; /path/to/exported_private_key.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Nginx</category>
            <category>Certbot工具</category>
            <category>https证书申请</category>
        </item>
    </channel>
</rss>